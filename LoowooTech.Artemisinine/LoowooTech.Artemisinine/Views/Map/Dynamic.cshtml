@{
    ViewBag.Title = "动态图层";
    Layout = "~/Views/Map/_Layout.cshtml";
    List<int> Years = ViewBag.List;
    
    var sicks = new List<string>();
    foreach (Sick sicktype in Enum.GetValues(typeof(Sick)))
    {
        sicks.Add(sicktype.GetDescription());
    }
    var xzcs = GISManager.GetXZC();
}
<script src="~/Scripts/jquery.shCircleLoader-min.js"></script>
<div id="masker" style="background:#000;text-align:center;width:100%;position:absolute;bottom:0px;top:60px;z-index:999;">
    <div id="loader" style="width: 112px; height: 112px;margin:40px auto;"></div>
</div>
<style>
    body, #map { margin: 0; padding: 0; background-color: black; }
    #map_zoom_slider { top: 90px; }
    #Search { display: block; position: absolute; z-index: 2; top: 70px; left: 20px; }
    #HomeButton { position: absolute; top: 115px; left: 20px; z-index: 50; }
    #timeInfo { display: block; padding: 5px; position: absolute; /* top: 65px; */ /* left: 80px; */ text-align: center; /* width: 1000px; */ z-index: 99; bottom: 0px; left: 200px; right: 200px; }
    #menu { position: absolute; z-index: 2; top: 225px; left: 20px; }
    .blurInfo { position: absolute; top: 60px; right: 330px; font-size: 1.25em; font-family: monospace; color: #4C4C4C; width: 240px; background-color: #FFFFFF; padding: 10px; border: 2px solid #57585A; border-radius: 20px; }
        .blurInfo p span { background-color: #FFFFFF; padding: 0 5px; border-radius: 5px; }
        .blurInfo input[type=range] { width: 100%; display: block; }
    .chart { position: absolute;  color: #999; background-color: rgba(255, 255, 255, 0.22); height: 150px;z-index:99999;}
    #chart1 { top: 62px; right: 0px; }
    #chart2 { top: 300px; right: 0px; }
    #chart3 { right: 0px; bottom: 0px; }
    .dijitRuleMark, .dijitSliderBar { border-color: white; }
    .iframe{border:none;overflow:hidden;}
    .show{background:#7cd2f8;position:absolute;z-index:1;left:200px;top:70px;}
    .WJLChart{position:absolute;right:0; top:80px;bottom:100px;}
    .WJL{position:relative;background-color: rgba(50, 50, 50, 0.8);float:right;display:block;z-index:1;margin:6px;}
</style>
<script src="~/Maps/Info.js"></script>
<script src="~/Scripts/Dynamic.js"></script>
<script>

    function hook() {
        $(".show").mousedown(function (e)//e鼠标事件  
        {
            console.log("start move");
            $(this).css("cursor", "move");//改变鼠标指针的形状  

            var offset = $(this).offset();//DIV在页面的位置  
            var x = e.pageX - offset.left;//获得鼠标指针离DIV元素左边界的距离  
            var y = e.pageY - offset.top;//获得鼠标指针离DIV元素上边界的距离  
            $(document).bind("mousemove", function (ev)//绑定鼠标的移动事件，因为光标在DIV元素外面也要有效果，所以要用doucment的事件，而不用DIV元素的事件  
            {
                $(".show").stop();//加上这个之后  

                var _x = ev.pageX - x;//获得X轴方向移动的值  
                var _y = ev.pageY - y;//获得Y轴方向移动的值  

                $(".show").animate({ left: _x + "px", top: _y + "px" }, 10);
            });

        });
    }
    $(function () {
        $("#blurInfo").hide();
        console.log("fuck");
        $("#AAButton").hide();
        $("#RabiesButton").hide();
        $("#Bill").hide();
        $("#loader").shCircleLoader({ color: "Red" });
        $("#ExcelBtn").click(function () {
            $("#Bill").toggle();
        })

        $(".show").mousedown(function (e)//e鼠标事件  
        {
            console.log("start move");
            $(this).css("cursor", "move");//改变鼠标指针的形状  

            var offset = $(this).offset();//DIV在页面的位置  
            var x = e.pageX - offset.left;//获得鼠标指针离DIV元素左边界的距离  
            var y = e.pageY - offset.top;//获得鼠标指针离DIV元素上边界的距离  
            $(document).bind("mousemove", function (ev)//绑定鼠标的移动事件，因为光标在DIV元素外面也要有效果，所以要用doucment的事件，而不用DIV元素的事件  
            {
                $(".show").stop();//加上这个之后  

                var _x = ev.pageX - x;//获得X轴方向移动的值  
                var _y = ev.pageY - y;//获得Y轴方向移动的值  

                $(".show").animate({ left: _x + "px", top: _y + "px" }, 10);
            });

        });

        $(document).mouseup(function () {
            $(".show").css("cursor", "default");
            $(this).unbind("mousemove");
        })
    })
</script>


<div id="HomeButton"></div>
<div id="Search"></div>

<form id="menu" class="col-lg-1">
    <div class="form-group">
        <label class="control-label">图层：</label>
        <select class="form-control" id="MapType">
            @foreach (MapType maptype in Enum.GetValues(typeof(MapType)))
            {
                <option value="@(maptype.ToString())">@(maptype.GetDescription())</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label class="control-label">疾病类型：</label>
        <select class="form-control" name="SickType" id="SickType">
            @foreach (Sick sicktype in Enum.GetValues(typeof(Sick)))
            {
                <option value="@(sicktype.ToString())">@(sicktype.GetDescription())</option>
            }
        </select>
    </div>
    <button type="button" class="btn btn-primary btn-xs" id="ExcelBtn">新增图表</button>
    <div id="Bill">
        <div class="form-group">
            <label class="control-label">行政区：</label>
            <select class="form-control" name="XZC" id="XZC">
                @foreach (var xzc in xzcs)
                {
                    <option value="@(xzc)">@(xzc)</option>
                }
            </select>
        </div>
        <div class="form-group">
            <label class="control-label">起始时间：</label>
            <input type="text" name="BeginTime" id="BeginTime" value="2015-9-4" class="form-control" style="width:120px;" />
        </div>
        <div class="form-group">
            <label class="control-label">结束时间：</label>
            <input type="text" name="EndTime" id="EndTime" value="2015-10-25" class="form-control" style="width:120px;" />
        </div>
        <div class="form-group">
            <a href="#" id="btn-chart-time" class="btn btn-primary">时间对比</a>
        </div>
        <div class="form-group">
            <a href="#" id="btn-chart-xzc" class="btn btn-primary">地区对比</a>
        </div>
        <div class="form-group">
            <a href="#" id="btn-chart-sick" class="btn btn-primary">病种对比</a>
        </div>
    </div>
    
    <input type="hidden" id="control-click-btn" name="type" />
</form>
<div class="row">
    <div id="chart" class="WJLChart col-lg-10 col-lg-offset-2">

    </div>
</div>


<div id="chart1" class="chart">

</div>
<div id="chart2" class="chart">

</div>
<div id="chart3" class="chart">

</div>
<div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
</div>
<div class="blurInfo" id="blurInfo">
    <p>
        <label for="valueControl">Weight by Data</label>
        <input id="valueControl" type="checkbox" checked />
    </p>
    <p>Blur Radius:<span id="blurValue">10</span></p>
    <input id="blurControl" type="range" max="30" min="0" value="10" step="1" />
    <p>Max Value:<span id="maxValue">100</span></p>
    <input id="maxControl" type="range" max="500" min="0" value="100" step="1" />
    <p>Min Value:<span id="minValue">0</span></p>
    <input id="minControl" type="range" max="500" min="0" value="0" step="1" />
</div>
<div id="timeInfo">
    <div>当前日期为：<span id="modern"></span></div>
    <button id="AAButton" class="btn btn-xs btn-success"><i class="glyphicon glyphicon-play"></i></button>
    <div id="timeSliderDivAA"></div>
    <button id="RabiesButton" class="btn btn-xs btn-success"><i class="glyphicon glyphicon-play"></i></button>
    <div id="timeSliderDivRabies"></div>
</div>
<script>
    $(function () {
        var headerHeight = $("#header").height();
        var footerHeight = $("#footer").height();
        var clientHeight = document.documentElement.clientHeight;
        var mapHeight = clientHeight - headerHeight - footerHeight;

        $("#map").height(mapHeight);
//<<<<<<< HEAD
//=======

//        $("#btn-chart-xzc").click(function () {
//            var data = $("#menu").serialize();
//            $("#chart1").attr("src", "/map/chart?type=xzc&" + data);
//            return false;
//        });

//        $("#btn-chart-time").click(function () {
//            var data = $("#menu").serialize();
//            $("#chart2").attr("src", "/map/chart?type=time&" + data);
//            return false;
//        });

//        $("#btn-chart-sick").click(function () {
//            var data = $("#menu").serialize();
//            $("#chart3").attr("src", "/map/chart?type=sick&" + data);
//            return false;
//        });
//>>>>>>> origin/dev
    });
</script>