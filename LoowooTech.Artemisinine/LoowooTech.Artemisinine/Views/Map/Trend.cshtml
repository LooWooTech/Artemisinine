@using LoowooTech.Artemisinine.Models
@using LoowooTech.Artemisinine.Common
@{
    ViewBag.Title = "发病趋势图";
    Layout = "~/Views/Map/_Layout2.cshtml";
    List<string> list = ViewBag.List;
}

<script>
    require([
        "dojo/dom","dojo/_base/connect",
        "dojo/domReady!"
    ], function (dom,connect) {
        var xzcselect = dom.byId("XZC");
        var sickselect = dom.byId("Sick");
        var title = dom.byId("Title");
        var iframebtn = dom.byId("frame");
        connect.connect(xzcselect, "onchange", function () {
            selectChange();
        });
        connect.connect(sickselect, "onchange", function () {
            selectChange();
        });

        function selectChange() {
            title.innerHTML = xzcselect.value + sickselect.value;
            iframebtn.src = "/Map/ChartLine?XZC=" + xzcselect.value + "&&sick=" + sickselect.value;
        }
    })
</script>

<form class="form-horizontal">
    <div class="form-group">
        <div class="col-lg-6 col-lg-offset-3">
            <h3><span id="Title"></span>发病趋势图</h3>
        </div>
        
    </div>
    <div class="form-group">
        <label for="" class="control-label col-lg-3">区域：</label>
        <div class="col-lg-3">
            <select id="XZC" class="form-control">
                @foreach (var item in list)
                {
                    <option value="@(item)">@(item)</option>
                }
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="" class="control-label col-lg-3">疾病：</label>
        <div class="col-lg-3">
            <select id="Sick" class="form-control">
                @foreach (Sick sicktype in Enum.GetValues(typeof(Sick)))
                {
                    <option value="@(sicktype.ToString())">@(sicktype.GetDescription())</option>
                }
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-lg-4 col-lg-offset-2">
            <iframe  src="http://www.baidu.com" height="500" width="600" frameborder="0" id="frame"></iframe>
        </div>
        
    </div>
</form>



